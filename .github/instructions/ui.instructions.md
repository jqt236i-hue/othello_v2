---
applyTo: "ui/**/*.js"
---

# ui/（描画・入力・演出）向け追加指示

- `ui/` は `game/` の公開 API・イベント・DI だけを使い、内部実装に依存しない。
- UI実装の注入（DI）は `ui/bootstrap.js` に一本化する（出口 `__uiImpl_*` をむやみに増やさず、必要なら既存を拡張）。
- `window` / `globalThis` への新規公開は最小限。追加する場合は「公開理由」と「参照先」を近くに明記する。
- デバッグ/診断は `?debug=1` 等で明示的に有効化したときだけ動くようにする（常時稼働の `setInterval` は原則禁止）。
- 演出は `ui/animation-*` と `ui/stone-visuals.js` に集約し、同種の処理を散らさない。

変更時チェック:
- `game/` 内部実装に直接依存していない
- debug が通常時に有効化されない
